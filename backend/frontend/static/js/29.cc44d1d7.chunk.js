(this["webpackJsonponline-tutors"]=this["webpackJsonponline-tutors"]||[]).push([[29],{551:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"g",(function(){return v}));var n=a(542),r=a.n(n),l=a(543),s=(a(39),a(6)),c=a(107),o=a(108),i=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",e&&e.page?(isNaN(e.page)&&(e.page=1),isNaN(e.perPage)&&(e.perPage=4),n="/levels?page=".concat(e.page,"&perPage=").concat(e.perPage)):n="/levels?page=1&perPage=4",t.next=4,c.a.get(n).then((function(t){a({type:s.F,data:t.data.levels,totalPages:t.data.totalPages,params:e})})).catch(o.c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u=function(e){return function(t,a){var n=a().level.params,r=new FormData;r.append("image",e.file),r.append("name",e.name),r.append("description",e.description),c.a.post("/level/create",r).then((function(e){t({type:s.e,obj:e.data.doc}),t(i(n)),Object(o.d)("Successfully Submitted")})).catch(o.c)}},m=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/levels").then((function(e){t({type:s.w,data:e.data.levels})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(t){return t({type:s.P,value:e})}},p=function(e){return function(t){c.a.delete("/level/"+e._id).then((function(a){t({type:s.m,obj:e}),Object(o.d)("Successfully  deleted!")})).catch(o.c)}},f=function(e){return function(t){c.a.put("/levels-delete",{ids:e}).then((function(e){e.data.relatedData&&e.data.relatedData.length>0&&Object(o.b)("".concat(e.data.relatedData.length," data has relevant data.")),e.data.deletedIds.length>0&&Object(o.d)("Successfully deleted"),t({type:s.n,ids:e.data.deletedIds})})).catch(o.c)}},v=function(e){return function(t,a){var n=new FormData;n.append("image",e.file),n.append("name",e.name),n.append("description",e.description);var r=a().level.params;c.a.put("/level/"+e._id,n).then((function(a){t({type:s.ab,obj:e}),t(i(r))})).catch(o.c)}}},565:function(e,t,a){},599:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(39);var n=a(6),r=a(107),l=(a(17),function(){return function(e){r.a.get("/tutor/users").then((function(t){if(t.data){var a=t.data.users;e({type:n.G,payload:a})}})).catch((function(e){return console.log(e)}))}})},877:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(13),l=a(15),s=a(14),c=a(0),o=a.n(c),i=a(604),u=a(575),m=a(576),d=a(602),p=a(635),f=a(855),v=a(532),b=a(533),h=a(634),g=a(3),y=a.n(g),E=a(607),D=a(632),Y=a(633),O=a(302),j=a(555),N=a(853),M=a(605),S=a.n(M),x=(a(606),a(213)),C=(a(565),a(854)),R=a.n(C),T=a(27),P=a(599),w=a(551),k=Object(N.a)(),A=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={students:[],levels:[],preloadRange:"",reportYearOptions:[{value:"PAST_1_YEAR",label:"Past 1 year"},{value:"PAST_6_MONTH",label:"Past 6 month"},{value:"SELECT_INTERVAL",label:"Select Interval"}],reportTypesOptions:[{value:"Assignment",label:"Assignment"},{value:"Exam",label:"Exam"}],queryObj:{students:[],reportType:"",startDate:"",endDate:"",studentLevel:""},showCustomPeriod:!1,inValid:!1},r.onQuery=function(e){e.preventDefault();var t=r.state.queryObj;console.log("---   queryObj   ---- ",t),r.isValid()?r.props.toggle("2"):r.setState({inValid:!0})},r.handleChangeReportYear=function(e){var t=r.state.queryObj;switch(e){case"PAST_1_YEAR":var a=R()(new Date,"YYYY-MM-DD",!0).subtract(12,"M").format("YYYY-MM-DD");t.startDate=a,t.endDate=r.currentDate,r.setState({queryObj:t,showCustomPeriod:!1});break;case"PAST_6_MONTH":var n=R()(new Date,"YYYY-MM-DD",!0).subtract(6,"M").format("YYYY-MM-DD");t.startDate=n,t.endDate=r.currentDate,r.setState({queryObj:t,showCustomPeriod:!1});break;case"SELECT_INTERVAL":t.startDate=r.firstDay,t.endDate=r.currentDate,r.setState({showCustomPeriod:!0,queryObj:t})}},r.isValid=function(){for(var e=0,t=Object.keys(r.state.queryObj);e<t.length;e++){var a=t[e];if(!r.state.queryObj[a])return!1}return!0},r.handleCustomFilter=function(e){if(2==e.length){var t=R()(e[0],"YYYY-MM-DD",!0).format("YYYY-MM-DD"),a=R()(e[1],"YYYY-MM-DD",!0).format("YYYY-MM-DD"),n=r.state.queryObj;n.startDate=t,n.endDate=a,r.setState({queryObj:n})}},r.renderRequiredText=function(e){return o.a.createElement("p",{className:"text-danger ml-1"},e||"you need to select this option")},r.currentDate=R()(new Date,"YYYY-MM-DD",!0).format("YYYY-MM-DD"),r.firstDay=R()().startOf("year").format("YYYY-MM-DD"),r}return Object(r.a)(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){return Object.is(e.students,t.students)?Object.is(e.levels,t.levels)?null:{levels:e.levels}:{students:e.students}}}]),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getMyStudents(),this.props.getLevels()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.state,a=t.reportYearOptions,n=t.reportTypesOptions,r=t.queryObj,l=t.students,s=t.levels,i=t.showCustomPeriod,u=r,m=l.map((function(e){return{value:e._id,label:"".concat(e.firstname," ").concat(e.lastname),color:"#00B8D9",isFixed:!0}})),d=s.map((function(e){return{value:e._id,label:e.name}}));return o.a.createElement(c.Fragment,null,o.a.createElement(E.a,{onSubmit:this.onQuery},o.a.createElement(D.a,null,o.a.createElement(Y.a,{md:"2",sm:"12"},o.a.createElement("h5",{className:"text-bold-600 my-1"},"Students")),o.a.createElement(Y.a,{md:"6",sm:"12"},o.a.createElement(j.a,{closeMenuOnSelect:!1,components:k,defaultValue:[m[4],m[5]],isMulti:!0,options:m,className:"React",classNamePrefix:"select",name:"students",onChange:function(t){u.students=t.map((function(e){return e.value})),e.setState({queryObj:u})}}),0===r.students.length&&this.renderRequiredText())),o.a.createElement(D.a,null,o.a.createElement(Y.a,{md:"2",sm:"12"},o.a.createElement("h5",{className:"my-1 text-bold-600"},"Report Type")),o.a.createElement(Y.a,{md:"4",sm:"12"},o.a.createElement(j.a,{className:"React",classNamePrefix:"select",name:"reportType",options:n,onChange:function(t){u.reportType=t.value,e.setState({queryObj:u})}}))),o.a.createElement(D.a,null,o.a.createElement(Y.a,{md:"2",sm:"12"},o.a.createElement("h5",{className:"my-1 text-bold-600"},"Report Year")),o.a.createElement(Y.a,{md:"4",sm:"12"},o.a.createElement(j.a,{className:"React",classNamePrefix:"select",name:"report_year",options:a,onChange:function(t){e.handleChangeReportYear(t.value)}})),i&&o.a.createElement(Y.a,{className:"mb-3",md:"4",sm:"12"},o.a.createElement(S.a,{className:"form-control",options:{mode:"range",defaultDate:[this.firstDay,this.currentDate]},onChange:this.handleCustomFilter}))),o.a.createElement(D.a,null,o.a.createElement(Y.a,{md:"2",sm:"12"},o.a.createElement("h5",{className:"my-1 text-bold-600"},"Student Level")),o.a.createElement(Y.a,{md:"4",sm:"12"},o.a.createElement(j.a,{className:"React",classNamePrefix:"select",defaultValue:d[0],name:"student_level",options:d,onChange:function(t){u.studentLevel=t.value,e.setState({queryObj:u})}}))),o.a.createElement("div",{className:"text-right mt-1"},o.a.createElement(O.a.Ripple,{className:"mr-1 mb-1",color:"success",type:"submit"},o.a.createElement(x.a,{size:14}),o.a.createElement("span",{className:"align-middle ml-25"},"Query")))))}}]),a}(c.Component),q={getMyStudents:P.a,getLevels:w.f},L=Object(T.b)((function(e){return console.log("---------------------------"),console.log(e),console.log("---------------------------"),{students:e.users.mystudents,levels:e.level.allData}}),q)(A),_=a(608),F=a.n(_),V=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={options:{chart:{id:"lineChart"},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]},stroke:{curve:"straight"},dataLabels:{enabled:!1},title:{text:"Report Assignment",align:"left"},colors:e.props.themeColors,grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}}},series:[{name:"Assigned",data:[10,41,35,51,49,62,69,91,148]},{name:"Done",data:[20,30,20,55,90,20,30,45,120]}]},e}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(c.Fragment,null,o.a.createElement(i.a,null,o.a.createElement(d.a,null,o.a.createElement(F.a,{options:this.state.options,series:this.state.series,type:"line",height:450}))))}}]),a}(c.Component),I=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={options:{chart:{id:"lineChart"},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]},stroke:{curve:"straight"},dataLabels:{enabled:!1},title:{text:"Report Exam",align:"left"},colors:e.props.themeColors,grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}}},series:[{name:"Assigned",data:[10,41,35,51,49,62,69,91,148]},{name:"Done",data:[20,30,20,55,90,20,30,45,120]},{name:"Stoped",data:[15,27,60,12,54,15,20,36,50]}]},e}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(c.Fragment,null,o.a.createElement(i.a,null,o.a.createElement(d.a,null,o.a.createElement(F.a,{options:this.state.options,series:this.state.series,type:"line",height:450}))))}}]),a}(c.Component),J=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={active:"1",selectedYear:"",selectedDateType:"Daily",dateTypes:[{value:"DAILY",label:"Daily"},{value:"MONTHLY",label:"Monthly"},{value:"WEEKLY",label:"Weekly"}],yearsList:[]},e.toggle=function(t){e.state.active!==t&&e.setState({active:t})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=2019;t<(new Date).getFullYear()+1;t++)e.push({value:String(t),label:String(t)});this.setState({yearsList:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dateTypes,n=t.yearsList,r=t.selectedDateType,l=t.selectedYear;return o.a.createElement(c.Fragment,null,o.a.createElement(D.a,null,o.a.createElement(Y.a,{md:"2",xs:"12",sm:"12",className:"mt-auto mb-auto pt-5"},o.a.createElement("div",{className:"mb-1"},o.a.createElement(j.a,{className:"React",classNamePrefix:"select",name:"selectedYear",options:n,onChange:function(t){e.setState({selectedYear:t.value})}})),o.a.createElement("div",{className:"mb-1"},o.a.createElement(j.a,{className:"React",classNamePrefix:"select",defaultValue:a[0],name:"reportType",options:a,onChange:function(t){e.setState({selectedDateType:t.value})}}))),o.a.createElement(Y.a,{md:"10",xs:"12",sm:"12"},o.a.createElement(p.a,{tabId:"1"},o.a.createElement(f.a,{tabs:!0,className:"nav-fill"},o.a.createElement(v.a,null,o.a.createElement(b.a,{className:y()({active:"1"===this.state.active}),onClick:function(){e.toggle("1")}},"Assignment")),o.a.createElement(v.a,null,o.a.createElement(b.a,{className:y()({active:"2"===this.state.active}),onClick:function(){e.toggle("2")}},"Exam"))),o.a.createElement(h.a,{className:"py-50",activeTab:this.state.active},o.a.createElement(p.a,{tabId:"1"},o.a.createElement(V,{year:l,type:r})),o.a.createElement(p.a,{tabId:"2"},o.a.createElement(I,{year:l,type:r})))))))}}]),a}(c.Component),Q=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={active:"1",inVisibleResult:!0},e.toggle=function(t){e.state.active!==t&&e.setState({active:t})},e.setVisibleResult=function(t){e.setState({inVisibleResult:t})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state.inVisibleResult;return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,null,o.a.createElement(u.a,null,o.a.createElement(m.a,null,"Report")),o.a.createElement(d.a,null,o.a.createElement(p.a,{tabId:"1"},o.a.createElement(f.a,{tabs:!0,className:"nav-fill"},o.a.createElement(v.a,null,o.a.createElement(b.a,{className:y()({active:"1"===this.state.active}),onClick:function(){e.toggle("1")}},"Query")),o.a.createElement(v.a,null,o.a.createElement(b.a,{className:y()({active:"2"===this.state.active}),onClick:function(){e.toggle("2")},disabled:t},"Result"))),o.a.createElement(h.a,{className:"py-50",activeTab:this.state.active},o.a.createElement(p.a,{tabId:"1"},o.a.createElement(L,{toggle:function(t){return e.toggle(t)},setVisibleResult:this.setVisibleResult})),o.a.createElement(p.a,{tabId:"2"},o.a.createElement(J,null)))))))}}]),a}(o.a.Component);t.default=Q}}]);
//# sourceMappingURL=29.cc44d1d7.chunk.js.map